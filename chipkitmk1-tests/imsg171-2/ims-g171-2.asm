		include "../../includes/hardware.inc"
		include "../../includes/common.inc"

SHEILA_RAMDAC		EQU	$FE28
SHEILA_RAMDAC_WR_ADD	EQU	SHEILA_RAMDAC
SHEILA_RAMDAC_RD_ADD	EQU	SHEILA_RAMDAC + 3
SHEILA_RAMDAC_VAL	EQU	SHEILA_RAMDAC + 1
SHEILA_RAMDAC_MASK	EQU	SHEILA_RAMDAC + 2


A_SAV			EQU	$80

		CODE
		ORG		$2000

		; set up a mode 2 palette with ramdac_p[6,3,2,0] containing colour number

		LDA	#$AA
		STA	SHEILA_RAMDAC_MASK

		CLR	SHEILA_RAMDAC_WR_ADD

		LDB	#0
lp		TFR	B,A
		ANDA	#$AA
		BEQ	clsk
		STA	A_SAV

		ANDA	#$02
		BEQ	sk_R
		LDA	A_SAV
		ANDA	#$80
		ORA	#$4F
		ASRA
		ASRA
sk_R		STA	SHEILA_RAMDAC_VAL

		LDA	A_SAV
		ANDA	#$08
		BEQ	sk_G
		LDA	A_SAV
		ANDA	#$80
		ORA	#$4F
		ASRA
		ASRA
sk_G		STA	SHEILA_RAMDAC_VAL

		LDA	A_SAV
		ANDA	#$20
		BEQ	sk_B
		LDA	A_SAV
		ANDA	#$80
		ORA	#$4F
		ASRA
		ASRA
sk_B		STA	SHEILA_RAMDAC_VAL

		BRA	colsk


clsk		;LDA	#$80
		STA	SHEILA_RAMDAC_VAL
		STA	SHEILA_RAMDAC_VAL
		STA	SHEILA_RAMDAC_VAL

colsk
		INCB
		BNE	lp

		SWI





